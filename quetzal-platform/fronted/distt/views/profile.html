<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Quetzal Platform</title>
    <link rel="stylesheet" href="/public/css/main.css">
    <link rel="stylesheet" href="/public/css/user.css">
</head>
<body>
    <div class="user-layout">
        <!-- Sidebar -->
        <aside class="user-sidebar" id="userSidebar">
            <!-- Header -->
            <div class="user-sidebar-header">
                <div class="user-sidebar-brand">
                    <span class="user-sidebar-brand-icon">ðŸ¦œ</span>
                    <span>Quetzal</span>
                </div>
            </div>

            <!-- User Profile -->
            <div class="user-sidebar-profile">
                <img id="sidebar-avatar" class="user-sidebar-avatar" src="https://ui-avatars.com/api/?name=Usuario&size=128&background=8b5cf6&color=fff" alt="Avatar">
                <div class="user-sidebar-name" id="sidebar-user-name">Cargando...</div>
                <div class="user-sidebar-email" id="sidebar-user-email">usuario@email.com</div>
                <div class="user-sidebar-balance">
                    <div class="user-sidebar-balance-label">Balance Disponible</div>
                    <div class="user-sidebar-balance-amount">
                        <span>ðŸ’°</span>
                        <span id="sidebar-balance">Q 0.00</span>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="user-sidebar-nav">
                <div class="user-sidebar-nav-title">MenÃº Principal</div>
                <a href="dashboard.html" class="user-sidebar-nav-item">
                    <span class="user-sidebar-nav-icon">ðŸ“Š</span>
                    <span class="user-sidebar-nav-text">Dashboard</span>
                </a>
                <a href="services.html" class="user-sidebar-nav-item">
                    <span class="user-sidebar-nav-icon">âš¡</span>
                    <span class="user-sidebar-nav-text">Servicios</span>
                </a>
                <a href="messages.html" class="user-sidebar-nav-item">
                    <span class="user-sidebar-nav-icon">ðŸ’¬</span>
                    <span class="user-sidebar-nav-text">Mensajes</span>
                    <span class="user-sidebar-nav-badge" id="messages-badge">3</span>
                </a>
                <a href="wallet.html" class="user-sidebar-nav-item">
                    <span class="user-sidebar-nav-icon">ðŸ’°</span>
                    <span class="user-sidebar-nav-text">Billetera</span>
                </a>
                <a href="my-contracts.html" class="user-sidebar-nav-item">
                    <span class="user-sidebar-nav-icon">ðŸ“„</span>
                    <span class="user-sidebar-nav-text">Mis Contrataciones</span>
                </a>
                <a href="my-sales.html" class="user-sidebar-nav-item">
                    <span class="user-sidebar-nav-icon">ðŸ’¼</span>
                    <span class="user-sidebar-nav-text">Mis Ventas</span>
                </a>

                <div class="user-sidebar-nav-title">Mi Cuenta</div>
                <a href="profile.html" class="user-sidebar-nav-item active">
                    <span class="user-sidebar-nav-icon">ðŸ‘¤</span>
                    <span class="user-sidebar-nav-text">Perfil</span>
                </a>
                <a href="create-service.html" class="user-sidebar-nav-item">
                    <span class="user-sidebar-nav-icon">âž•</span>
                    <span class="user-sidebar-nav-text">Publicar Servicio</span>
                </a>
            </nav>

            <!-- Footer -->
            <div class="user-sidebar-footer">
                <button class="user-sidebar-logout" id="logout-btn">
                    <span>ðŸšª</span>
                    <span>Cerrar SesiÃ³n</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="user-main">
            <!-- Top Bar -->
            <div class="user-topbar">
                <div class="user-topbar-left">
                    <button class="user-toggle-btn" id="sidebarToggle">
                        <span>â˜°</span>
                    </button>
                    <div>
                        <div class="user-topbar-title">Mi Perfil</div>
                        <div class="user-topbar-breadcrumb">
                            <a href="dashboard.html">Inicio</a>
                            <span>â€º</span>
                            <span>Perfil</span>
                        </div>
                    </div>
                </div>
                <div class="user-topbar-right">
                    <button class="btn btn-primary btn-sm" id="save-profile-btn">
                        ðŸ’¾ Guardar Cambios
                    </button>
                    <button class="user-topbar-notifications">
                        <span>ðŸ””</span>
                        <span class="user-topbar-notifications-badge">5</span>
                    </button>
                </div>
            </div>

            <!-- Content -->
            <div class="user-content">
                <!-- Page Header -->
                <div class="user-page-header">
                    <h1 class="user-page-title">Gestiona tu Perfil</h1>
                    <p class="user-page-subtitle">Actualiza tu informaciÃ³n personal y preferencias</p>
                </div>

                <!-- Profile Content -->
                <div class="grid" style="grid-template-columns: 300px 1fr; gap: 2rem;">
                    <!-- Sidebar -->
                    <aside class="profile-sidebar">
                        <div class="card">
                            <div class="profile-avatar-wrapper">
                                <img 
                                    src="https://ui-avatars.com/api/?name=Usuario+Demo&size=120&background=8b5cf6&color=fff" 
                                    alt="Avatar" 
                                    class="avatar avatar-xl mb-3"
                                    id="profile-avatar">
                                <button class="btn btn-sm btn-outline" onclick="document.getElementById('avatar-input').click()">
                                    Cambiar Foto
                                </button>
                                <input type="file" id="avatar-input" accept="image/*" class="profile-avatar-upload">
                            </div>
                            
                            <hr class="my-4 border-top">
                            
                            <div class="profile-stats">
                                <div class="profile-stat">
                                    <div class="profile-stat-value">4.8</div>
                                    <div class="profile-stat-label">Rating</div>
                                </div>
                                <div class="profile-stat">
                                    <div class="profile-stat-value">127</div>
                                    <div class="profile-stat-label">Servicios</div>
                                </div>
                            </div>
                        </div>

                        <!-- Navigation Menu -->
                        <div class="card mt-3 p-0">
                            <nav class="profile-nav">
                                <a href="#info-personal" class="profile-nav-link active" data-tab="info-personal">
                                    ðŸ“‹ InformaciÃ³n Personal
                                </a>
                                <a href="#seguridad" class="profile-nav-link" data-tab="seguridad">
                                    ðŸ”’ Seguridad
                                </a>
                                <a href="#habilidades" class="profile-nav-link" data-tab="habilidades">
                                    âš¡ Habilidades
                                </a>
                                <a href="#actividad" class="profile-nav-link" data-tab="actividad">
                                    ðŸ§¾ Mi Actividad
                                </a>
                                <a href="#notificaciones" class="profile-nav-link" data-tab="notificaciones">
                                    ðŸ”” Notificaciones
                                </a>
                            </nav>
                        </div>
                    </aside>

                    <!-- Content Area -->
                    <main>
            <!-- Tab: InformaciÃ³n Personal -->
            <div class="tab-content active" id="info-personal">
            <div class="card">
                <div class="card-header">
                <h2 class="card-title">InformaciÃ³n Personal</h2>
                <p class="card-subtitle">Actualiza tus datos de contacto y perfil</p>
                </div>

                <form id="profile-form">
                <div class="grid grid-cols-2">
                    <div class="form-group">
                    <label for="fullName" class="form-label form-label-required">Nombre Completo</label>
                    <input 
                        type="text" 
                        id="fullName" 
                        class="form-input" 
                        value="Juan PÃ©rez GarcÃ­a"
                        required>
                    </div>

                    <div class="form-group">
                    <label for="phone" class="form-label form-label-required">TelÃ©fono</label>
                    <input 
                        type="tel" 
                        id="phone" 
                        class="form-input" 
                        value="+57 300 123 4567"
                        required>
                    </div>
                </div>

                <div class="grid grid-cols-2">
                    <div class="form-group">
                    <label for="city" class="form-label">Ciudad</label>
                    <select id="city" class="form-select">
                        <option value="bogota" selected>BogotÃ¡</option>
                        <option value="medellin">MedellÃ­n</option>
                        <option value="cali">Cali</option>
                    </select>
                    </div>

                    <div class="form-group">
                    <label for="userType" class="form-label">Tipo de Cuenta</label>
                    <select id="userType" class="form-select">
                        <option value="provider">Proveedor</option>
                        <option value="consumer">Consumidor</option>
                        <option value="both" selected>Ambos</option>
                    </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="bio" class="form-label">BiografÃ­a</label>
                    <textarea 
                    id="bio" 
                    class="form-textarea" 
                    placeholder="CuÃ©ntanos sobre ti, tu experiencia y servicios...">Desarrollador Full Stack con 5 aÃ±os de experiencia en Node.js, React y bases de datos SQL/NoSQL. Especializado en crear aplicaciones web escalables y eficientes.</textarea>
                </div>

                <div class="form-group">
                    <label for="website" class="form-label">Sitio Web</label>
                    <input 
                    type="url" 
                    id="website" 
                    class="form-input" 
                    placeholder="https://tu-sitio.com">
                </div>

                <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </form>
            </div>
            </div>

            <!-- Tab: Seguridad -->
            <div class="tab-content" id="seguridad">
            <div class="card">
                <div class="card-header">
                <h2 class="card-title">Seguridad de la Cuenta</h2>
                <p class="card-subtitle">Actualiza tu contraseÃ±a y configura la seguridad</p>
                </div>

                <form id="security-form">
                <div class="form-group">
                    <label for="currentPassword" class="form-label form-label-required">ContraseÃ±a Actual</label> 
                    type="password" 
                    id="currentPassword" 
                    class="form-input" 
                    placeholder="Tu contraseÃ±a actual"
                    required>
                </div>

                <div class="form-group">
                    <label for="newPassword" class="form-label form-label-required">Nueva ContraseÃ±a</label>
                    <input 
                    type="password" 
                    id="newPassword" 
                    class="form-input" 
                    placeholder="MÃ­nimo 8 caracteres"
                    required>
                    <span class="form-help">Debe contener al menos 8 caracteres, una mayÃºscula y un nÃºmero</span>
                </div>

                <div class="form-group">
                    <label for="confirmNewPassword" class="form-label form-label-required">Confirmar Nueva ContraseÃ±a</label>
                    <input 
                    type="password" 
                    id="confirmNewPassword" 
                    class="form-input" 
                    placeholder="Repite la nueva contraseÃ±a"
                    required>
                </div>

                <button type="submit" class="btn btn-primary">Actualizar ContraseÃ±a</button>
                </form>
            </div>
            </div>

            <!-- Tab: Habilidades -->
            <div class="tab-content" id="habilidades">
            <div class="card">
                <div class="card-header">
                <h2 class="card-title">Habilidades y Experiencia</h2>
                <p class="card-subtitle">Agrega tus habilidades para destacar tu perfil</p>
                </div>

                <div class="form-group">
                <label class="form-label">Agregar Habilidad</label>
                <div class="flex gap-2">
                    <input 
                    type="text" 
                    id="skill-input" 
                    class="form-input" 
                    placeholder="Ej: JavaScript, DiseÃ±o GrÃ¡fico, Marketing">
                    <button type="button" class="btn btn-primary" id="add-skill-btn">Agregar</button>
                </div>
                </div>

                <div id="skills-container" class="skills-container">
                <span class="skill-badge">
                    Node.js <span class="skill-remove">Ã—</span>
                </span>
                <span class="skill-badge">
                    React <span class="skill-remove">Ã—</span>
                </span>
                <span class="skill-badge">
                    PostgreSQL <span class="skill-remove">Ã—</span>
                </span>
                </div>
            </div>
            </div>

            <!-- Tab: Notificaciones -->
            <div class="tab-content" id="notificaciones">
            <div class="card">
                <div class="card-header">
                <h2 class="card-title">Preferencias de Notificaciones</h2>
                <p class="card-subtitle">Configura cÃ³mo quieres recibir notificaciones</p>
                </div>

                <form id="notifications-form">
                <h3 class="section-subtitle">Notificaciones por Email</h3>

                <div class="form-group">
                    <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="email-transactions" checked>
                    <div>
                        <div class="font-semibold text-primary">Transacciones</div>
                        <div class="text-sm text-secondary">Recibe notificaciones de pagos y transferencias</div>
                    </div>
                    </label>
                </div>

                <div class="form-group">
                    <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="email-messages" checked>
                    <div>
                        <div class="font-semibold text-primary">Mensajes</div>
                        <div class="text-sm text-secondary">Recibe notificaciones de nuevos mensajes</div>
                    </div>
                    </label>
                </div>

                <div class="form-group">
                    <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="email-services">
                    <div>
                        <div class="font-semibold text-primary">Actualizaciones de Servicios</div>
                        <div class="text-sm text-secondary">Recibe notificaciones sobre tus servicios publicados</div>
                    </div>
                    </label>
                </div>

                <div class="form-group">
                    <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="email-marketing">
                    <div>
                        <div class="font-semibold text-primary">Novedades y Promociones</div>
                        <div class="text-sm text-secondary">Recibe informaciÃ³n sobre nuevas funciones</div>
                    </div>
                    </label>
                </div>

                <hr class="my-5 border-top">

                <h3 class="section-subtitle">Notificaciones Push</h3>

                <div class="form-group">
                    <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="push-enabled" checked>
                    <div>
                        <div class="font-semibold text-primary">Habilitar Notificaciones Push</div>
                        <div class="text-sm text-secondary">Recibe notificaciones en tiempo real en tu navegador</div>
                    </div>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary mt-3">Guardar Preferencias</button>
                </form>
            </div>
            </div>

            <!-- Tab: Actividad (Wallet, Mis Servicios, Transacciones) -->
            <div class="tab-content" id="actividad">
            <div class="card">
                <div class="card-header">
                <h2 class="card-title">Mi Actividad</h2>
                <p class="card-subtitle">Cartera, servicios publicados y transacciones</p>
                </div>

                <div class="card-body">
                <section id="profile-wallet" class="mb-4">
                    <h3>Tu Cartera</h3>
                    <div class="grid grid-cols-3 gap-4">
                    <div class="stat-card">
                        <div class="stat-card-value" id="profile-balance-quetzales">Q0.00</div>
                        <div class="stat-card-label">Balance en Quetzales</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="profile-pending-escrow">Q0.00</div>
                        <div class="stat-card-label">En Escrow</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="profile-balance-cop">$0 COP</div>
                        <div class="stat-card-label">Equivalente en COP</div>
                    </div>
                    </div>
                    <div class="flex justify-end mt-3"><a href="wallet.html" class="btn btn-secondary btn-sm">Ver Detalles</a></div>
                </section>

                <section id="profile-services" class="mb-4">
                    <h3>Mis Servicios</h3>
                    <div id="profile-my-services" class="grid grid-cols-2 gap-4">
                        <!-- Servicios del usuario -->
                    </div>
                    <div class="flex justify-end mt-3"><a href="services.html" class="btn btn-secondary btn-sm">Administrar Servicios</a></div>
                </section>

                <section id="profile-transactions">
                    <h3>Transacciones Recientes</h3>
                    <div id="profile-transactions-list" class="transactions-list"></div>
                </section>
                        </div>
                    </main>
                </div>
            </div>
        </main>
    </div>

    <!-- Overlay para mÃ³viles -->
    <div class="user-sidebar-overlay" id="sidebarOverlay"></div>

    <script src="/public/js/utils.js"></script>
    <script src="/public/js/api.js"></script>
    <script src="/public/js/user-sidebar.js"></script>
    <script src="/public/js/profile.js"></script>
    <script src="/public/js/app.js"></script>
</body>
</html>
