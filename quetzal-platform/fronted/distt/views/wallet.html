
<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Billetera - Quetzal Platform</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="../public/css/main.css">
	<link rel="stylesheet" href="../public/css/components.css">
	<link rel="stylesheet" href="../public/css/user.css">
</head>
	<body class="light-mode">
		<div class="dashboard-layout">
			<aside class="sidebar">
				<div class="sidebar-header">
					<span class="sidebar-logo"><i class="fas fa-feather-alt">Quetzal Platform</i></span>
				</div>
				<nav class="sidebar-nav">
					<a href="dashboard.html" class="sidebar-link"><i class="fas fa-house"></i> Inicio</a>
					<a href="services.html" class="sidebar-link"><i class="fas fa-search"></i> Servicios</a>
					<a href="my-contracts.html" class="sidebar-link"><i class="fas fa-compass"></i> Contratos</a>
					<a href="my-sales.html" class="sidebar-link"><i class="fas fa-film"></i> Ventas</a>
					<a href="wallet.html" class="sidebar-link"><i class="fas fa-wallet"></i> Billetera</a>
					<a href="messages.html" class="sidebar-link"><i class="fas fa-envelope"></i> Mensajes <span class="sidebar-badge" id="messages-badge">3</span></a>
					<a href="notifications.html" class="sidebar-link"><i class="fas fa-heart"></i> Notificaciones</a>
					<a href="create-service.html" class="sidebar-link"><i class="fas fa-plus"></i> Crear</a>
					<a href="profile.html" class="sidebar-link active"><img src="https://ui-avatars.com/api/?name=Usuario&size=32&background=8b5cf6&color=fff" class="sidebar-avatar"> Perfil</a>
				</nav>
			</aside>

	<main class="main-content">
		<div class="user-content">
			<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-2 pb-3 mb-4">
				<div>
					<h1 class="h2 fw-bold mb-1 page-title">
						<i class="fas fa-wallet me-2 text-primary"></i> Mi Billetera
					</h1>
					<p class="text-primary mb-0">Administra tu balance, compra fondos y revisa tus transacciones</p>
				</div>
			</div>

			<!-- Balance Card -->
			<div class="card card-gradient mb-4">
				<div class="card-body">
					<div class="d-flex justify-between align-center">
						<div>
							<p class="text-sm text-muted mb-1">Balance Disponible</p>
							<h2 class="balance-amount" id="balance">
								<span class="spinner animate-pulse"></span> Cargando...
							</h2>
							<p class="text-xs text-muted mt-1" id="balance-cop">‚âà $0 COP</p>
						</div>
						<div class="balance-icon">
							<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<circle cx="12" cy="12" r="10"></circle>
								<path d="M12 6v12M9 9l3-3 3 3"></path>
							</svg>
						</div>
					</div>
				</div>
			</div>

			<!-- Actions Grid -->
			<div class="row mb-4 g-3">
				<div class="col-md-6">
					<div class="card h-100">
						<div class="card-header">
							<h3 class="card-title">üí≥ Comprar Quetzales</h3>
							<p class="text-sm text-muted">A√±ade fondos a tu cartera</p>
						</div>
						<div class="card-body">
							<form id="purchase-form">
								<div class="form-group">
									<label for="q-amount" class="form-label">Cantidad (Quetzales)</label>
									<div class="input-with-icon">
										<span class="input-icon">Q</span>
										<input 
											type="number" 
											id="q-amount" 
											name="amount" 
											class="form-control" 
											min="1" 
											step="0.01" 
											placeholder="0.00"
											required 
										/>
									</div>
									<small class="text-muted" id="purchase-cop-preview">1 Quetzal = 10,000 COP</small>
								</div>

								<!-- Selecci√≥n de M√©todo de Pago -->
								<div class="form-group mb-3">
									<label class="form-label">M√©todo de Pago</label>
									<div class="form-check">
										<input class="form-check-input" type="radio" name="payment-method" id="pse-method" value="pse" checked>
										<label class="form-check-label" for="pse-method">PSE</label>
									</div>
									<div class="form-check">
										<input class="form-check-input" type="radio" name="payment-method" id="epayco-method" value="epayco">
										<label class="form-check-label" for="epayco-method">ePayco (Tarjeta de Cr√©dito/D√©bito)</label>
									</div>
								</div>

								<!-- Campo de Email (oculto por defecto, se muestra si se elige ePayco) -->
								<div id="epayco-email-group" class="form-group mb-3" style="display: none;">
									<label for="epayco-email" class="form-label">Email para la factura</label>
									<input 
										type="email" 
										id="epayco-email" 
										name="email" 
										class="form-control" 
										placeholder="correo@ejemplo.com"
									/>
								</div>

								<button type="submit" class="btn btn-primary w-100" id="submit-btn">
									<span class="btn-icon">üí≥</span>
									Procesar Pago
								</button>
							</form>
							<div id="purchase-result" class="mt-3"></div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="card h-100">
						<div class="card-header">
							<h3 class="card-title">üè¶ Retirar Fondos</h3>
							<p class="text-sm text-muted">Solicita un retiro a tu cuenta bancaria</p>
						</div>
						<div class="card-body">
							<form id="withdraw-form">
								<div class="form-group">
									<label for="w-amount" class="form-label">Cantidad (Quetzales)</label>
									<div class="input-with-icon">
										<span class="input-icon">Q</span>
										<input 
											type="number" 
											id="w-amount" 
											name="amount" 
											class="form-control" 
											min="1" 
											step="0.01" 
											placeholder="0.00"
											required 
										/>
									</div>
									<small class="text-muted" id="withdraw-cop-preview">‚âà $0 COP</small>
								</div>
								<div class="form-group">
									<label for="bank-details" class="form-label">Datos Bancarios</label>
									<input 
										type="text" 
										id="bank-details" 
										name="bankDetails" 
										class="form-control" 
										placeholder="Ej: Bancolombia - 123456789 - Ahorros" 
										required 
									/>
								</div>
								<button type="submit" class="btn btn-secondary w-100">
									<span class="btn-icon">üè¶</span>
									Solicitar Retiro
								</button>
							</form>
							<div id="withdraw-result" class="mt-3"></div>
						</div>
					</div>
				</div>
			</div>

			<!-- Transacciones Card -->
			<div class="card">
				<div class="card-header">
					<h3 class="card-title">üìä Transacciones Recientes</h3>
					<p class="text-sm text-muted">Historial de movimientos en tu cartera</p>
				</div>
				<div class="card-body">
					<div id="transactions-list" class="transactions-container animate-fadeIn">
						<div class="text-center py-4">
							<span class="spinner animate-pulse"></span>
							<p class="text-muted mt-2">Cargando transacciones...</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<!-- Overlay para m√≥viles -->
	<div class="user-sidebar-overlay" id="sidebarOverlay"></div>

	<script src="https://checkout.epayco.co/checkout.js"></script>
	<script src="/public/js/utils.js"></script>
	<script src="/public/js/user-sidebar.js"></script>
	<script type="module" src="/public/js/wallet.js"></script>
	<script src="/public/js/app.js"></script>
</body>
</html>